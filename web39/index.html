<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="topbar">
      <h1>üí∏ Expense Tracker</h1>
      <button id="resetApp" class="danger ghost" title="Reset all data">
        Reset
      </button>
    </header>

    <main class="container">
      <!-- Summary cards -->
      <section class="summary">
        <div class="card">
          <h3>Balance</h3>
          <div id="balance" class="number">0</div>
        </div>
        <div class="card">
          <h3>Total Income</h3>
          <div id="incomeTotal" class="number positive">0</div>
        </div>
        <div class="card">
          <h3>Total Expenses</h3>
          <div id="expenseTotal" class="number negative">0</div>
        </div>
      </section>

      <!-- Add transaction -->
      <section class="panel">
        <h2>Add Transaction</h2>
        <form id="txForm" autocomplete="off">
          <div class="row">
            <label class="sr-only" for="type">Type</label>
            <select id="type" required>
              <option value="expense">Expense</option>
              <option value="income">Income</option>
            </select>

            <label class="sr-only" for="amount">Amount</label>
            <input
              id="amount"
              type="number"
              step="0.01"
              min="0.01"
              placeholder="Amount"
              required
            />

            <label class="sr-only" for="category">Category</label>
            <input
              id="category"
              list="categoryList"
              placeholder="Category (e.g., Food)"
              required
            />
            <datalist id="categoryList">
              <option>Food</option>
              <option>Transport</option>
              <option>Bills</option>
              <option>Shopping</option>
              <option>Health</option>
              <option>Salary</option>
              <option>Entertainment</option>
              <option>Other</option>
            </datalist>

            <label class="sr-only" for="date">Date</label>
            <input id="date" type="date" required />

            <label class="sr-only" for="note">Note</label>
            <input id="note" type="text" placeholder="Note (optional)" />
          </div>
          <button class="primary" type="submit">Add</button>
        </form>
      </section>

      <!-- Filters -->
      <section class="panel">
        <h2>Filters</h2>
        <div class="row wrap">
          <div class="chip-group" role="group" aria-label="Quick filters">
            <button class="chip active" data-filter="all">All</button>
            <button class="chip" data-filter="this-month">This Month</button>
          </div>

          <div class="row">
            <label
              >From
              <input id="fromDate" type="date" />
            </label>
            <label
              >To
              <input id="toDate" type="date" />
            </label>
            <button id="applyRange" class="ghost">Apply</button>
            <button id="clearRange" class="ghost">Clear</button>
          </div>

          <div class="row">
            <input
              id="search"
              type="text"
              placeholder="Search note/category‚Ä¶"
            />
          </div>
        </div>
      </section>

      <!-- Chart -->
      <section class="panel">
        <h2>Expenses by Category</h2>
        <canvas
          id="pie"
          width="380"
          height="380"
          aria-label="Pie chart of expenses by category"
        ></canvas>
        <div id="legend" class="legend"></div>
      </section>

      <!-- Transactions table -->
      <section class="panel">
        <h2>Transactions</h2>
        <div class="table-wrap">
          <table id="txTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Category</th>
                <th class="right">Amount</th>
                <th>Note</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="txBody">
              <!-- Rows injected here -->
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <footer class="footer">
      <small
        >Built with ‚ù§Ô∏è using vanilla HTML/CSS/JS. Your data stays in your
        browser (localStorage).</small
      >
    </footer>

    <template id="rowTemplate">
      <tr>
        <td class="date"></td>
        <td class="type"></td>
        <td class="category"></td>
        <td class="amount right"></td>
        <td class="note"></td>
        <td class="actions">
          <button class="icon edit" title="Edit">‚úèÔ∏è</button>
          <button class="icon delete" title="Delete">üóëÔ∏è</button>
        </td>
      </tr>
    </template>

    <dialog id="editDialog">
      <form method="dialog" id="editForm">
        <h3>Edit Transaction</h3>
        <div class="row">
          <select id="eType" required>
            <option value="expense">Expense</option>
            <option value="income">Income</option>
          </select>
          <input id="eAmount" type="number" step="0.01" min="0.01" required />
          <input id="eCategory" list="categoryList" required />
          <input id="eDate" type="date" required />
          <input id="eNote" type="text" />
        </div>
        <menu>
          <button value="cancel" class="ghost">Cancel</button>
          <button id="saveEdit" value="default" class="primary">Save</button>
        </menu>
      </form>
    </dialog>

    <script src="app.js"></script>
  </body>
</html>
